ini rencana yang cukup besar, jadi saya ingin menggabungkan 1 aplikasi ke dalam doors ini. jadi ada 2 aplikasi yang dirumahkan dalam 1 kesatuan dan dipisahkan oleh modul rollback

rencana aplikasi yang akan dbuat lagi di sistem ini adalah:

# ğŸ“‹ Rekap Project LaporAC

> **AC Asset Management System**  
> Aplikasi manajemen aset AC berbasis web untuk Dharma Group  
> *Last Updated: 2 Februari 2026*

---

## ğŸ¯ Tujuan Sistem

Aplikasi ini dibuat untuk menyelesaikan masalah-masalah berikut:

1. **Keterlambatan Pelaporan Kerusakan**  
   Staff kesulitan melapor AC rusak â†’ harus cari kontak GA â†’ sering lupa/tertunda

2. **Maintenance Tidak Teratur**  
   Jadwal servis rutin sering terlewat karena tracking manual

3. **Biaya Tidak Terdokumentasi**  
   Sulit tracking total pengeluaran maintenance per tahun untuk budgeting

4. **Data Aset Tersebar**  
   Informasi AC (lokasi, serial number, riwayat) ada di Excel berbeda-beda

**Solusi**: Sistem terintegrasi dengan QR code reporting, auto-scheduling, dan dashboard analytics.

---


---

## âœ… Fitur yang Sudah Selesai

### 1. **Authentication & Authorization**
- Login dengan email/password 
- Role-Based Access Control (RBAC):
  - `super_adminga`: Full access
  - `admin_ga`: GA Staff (manage assets, validate tickets)
  - `technician & super_adminga `: View & update assigned tickets
  - `dept_headga`: Read-only analytics and setting Policy
-
- User Management UI untuk invite & assign roles

### 2. **Asset Management**
**Fitur**:
- CRUD Data AC (Create, Read, Update, Delete)
- Fields: SKU, Name, Brand, Location, PK, Status, Purchase Date
- **QR Code Generator**: Download stiker per unit (PNG) dengan info: SKU, Nama, Lokasi
- Import bulk data dari CSV (258 unit AC berhasil di-import)
- Filter & Search by location, status, brand
- Asset detail view dengan riwayat tickets

**UI**: Table view dengan pagination, filter sidebar, form modal (outline style)

### 3. **Report Form (Public Access - No Login)**
**URL**: `http://localhost:4200/report?sku=XXX`

**Flow**:
1. Staff scan QR code di unit AC fisik
2. Browser buka link â†’ Auto-load asset info (Nama AC, Lokasi, SKU)
3. Input NIK â†’ System cek API eksternal â†’ Auto-fill nama pelapor
4. Pilih kategori masalah:
   - AC Tidak Dingin / Panas
   - Bocor Air / Menetes
   - Suara Berisik / Aneh
   - Mati Total
   - Bau Tidak Sedap
5. Tambah keterangan (opsional)
6. Submit â†’ Ticket created dengan status `pending_validation`

**UI**: Clean, professional card layout (tidak ada elemen "playful")

### 4. **GA Validation Workflow** âœ… (Feature 1 - COMPLETED)
**Business Logic**:
- Staff lapor â†’ Status: `pending_validation`
- GA Staff review:
  - **Validasi (Valid)**: Status â†’ `open` (diteruskan ke teknisi)
  - **Tolak (False Alarm)**: Status â†’ `false_alarm` + auto closed
- Teknisi hanya melihat tiket yang sudah `open` ke atas

**UI - Admin Ticket List**:
- Tab Filter:
  - **Semua**: All tickets
  - **Butuh Validasi**: `pending_validation` tickets (with action buttons)
  - **Open / Proses**: `open`, `assigned`, `in_progress`
  - **Riwayat**: `resolved`, `closed`
- Action Buttons:
  - **Valid** (blue): Approve report
  - **Reject** (red X icon): Mark as false alarm
- Toast notifications untuk feedback

### 5. **Ticket Management (Admin/Teknisi)**
**Fitur**:
- List tickets dengan relasi ke asset & reporter
- Status tracking: `pending_validation` â†’ `open` â†’ `assigned` â†’ `in_progress` â†’ `resolved` â†’ `closed`
- Assign teknisi
- Update progress & resolution notes
- Upload foto bukti (coming soon)
- Track repair cost

**UI**: Table dengan status badges (colored), filter tabs, detail modal

### 6. **Executive Dashboard (Analytics)**
**KPI Cards**:
- Total Assets
- Open Tickets
- Pending Validation Tickets
- Total Maintenance Cost (YTD)

**Charts** (Chart.js):
1. **Ticket Trend**: Line chart (30 hari terakhir)
2. **Top 5 Most Reported Assets**: Bar chart (horizontal)
3. **Tickets by Category**: Pie chart (panas, bocor, berisik, etc.)
4. **Tickets by Location**: Bar chart (per gedung/lantai)

**Target User**: Dept Head untuk monitoring KPI & budgeting

### 7. **Audit Trail System**
**Database**: Tabel `audit_logs`
- Mencatat setiap aksi penting: CREATE, UPDATE, DELETE, LOGIN
- Fields: `user_id`, `action`, `target_table`, `target_id`, `details` (JSONB), `timestamp`

**Service**: `AuditService` (centralized logging)
- Integrated di: `AuthService`, `TicketService`, `AssetService`, `UserService`

**UI**: Activity Log Viewer (Super Admin only)
- Filter by date range, user, action type
- Search by target ID

### 8. **User Management (Super Admin)**
**Fitur**:
- List semua users dengan role
- **Invite User**: Kirim magic link via email (Supabase Auth)
- Assign/Change role
- Deactivate user (soft delete)

**Security**: Row-Level Security (RLS) di Supabase untuk proteksi data

### 9. **UI/UX Design - Corporate Professional**
**Style Guide**:
- **Theme**: Clean, Minimalist, "Outline" aesthetic
- **Colors**:
  - Primary: Gray scale (50-900)
  - Accents: Blue (info), Green (success), Red (error), Yellow (warning)
- **Typography**: Sans-serif, bold headers, readable body text
- **Components**:
  - Outline buttons with hover states
  - Card-based layouts with subtle borders
  - Responsive sidebar navigation
  - Toast notifications (top-right)
  - Form inputs dengan focus rings

**Pages Redesigned**:
- Login Page (corporate branding)
- Dashboard (Bento grid layout)
- Asset List (outline table dengan filters)
- Ticket List (tabs + action buttons)
- Asset Form (minimalist input style)
- Analytics (clean charts)


## ğŸ‘¥ User Roles & Permissions

| Role | Dashboard | Assets | Tickets | Users | Audit Logs | Analytics |
|------|-----------|--------|---------|-------|------------|-----------|
| **Super Admin** | âœ… | âœ… CRUD | âœ… Full | âœ… Manage | âœ… View | âœ… Full |
| **Admin (GA)** | âœ… | âœ… CRUD | âœ… Validate & Assign | âŒ | âŒ | âœ… Full |
| **Technician** | âœ… | ğŸ‘ï¸ View | âœ… Update Assigned | âŒ | âŒ | ğŸ‘ï¸ Own Stats |
| **Dept Head** | âœ… | ğŸ‘ï¸ View | ğŸ‘ï¸ View | âŒ | âŒ | âœ… Full |
| **Public/Staff** | âŒ | âŒ | âœ… Create (Report Form) | âŒ | âŒ | âŒ |

---

## ğŸ‰ Status Development

### âœ… **Completed Features** (Production Ready)
1. âœ… Authentication & RBAC
2. âœ… Asset Management + QR Generator
3. âœ… Public Report Form
4. âœ… Ticket Management
5. âœ… **GA Validation Workflow** (Feature 1)
6. âœ… Audit Trail
7. âœ… User Management
8. âœ… Executive Analytics Dashboard
9. âœ… UI Redesign (Corporate Professional)

### ğŸš§ **In Progress**
- **Feature 2: Preventive Maintenance**
  - â³ Planning completed
  - ğŸ“ Ready for execution

### ğŸ“ **Planned (Backlog)**
- Feature 3: Enhanced Audit Trail UI
- Feature 4: Data Export (PDF/Excel)
- Email/Push Notifications
- Mobile PWA

### **3. Sample Workflow**

#### **Scenario: Staff Melapor AC Rusak**
1. Staff scan QR code di unit AC (contoh: `http://localhost:4200/report?sku=GB001`)
2. Form terbuka â†’Input NIK â†’ Pilih "AC Tidak Dingin" â†’ Submit
3. Laporan masuk dengan status `pending_validation`

#### **Scenario: GA Staff Memvalidasi**
1. Login as Admin
2. Menu **Tickets** â†’ Tab **Butuh Validasi**
3. Review laporan:
   - Klik **Valid** â†’ Status jadi `open` (teknisi bisa akses)
   - Klik **Reject** â†’ Status jadi `false_alarm` (auto closed)

#### **Scenario: Teknisi Menyelesaikan**
1. Login as Technician
2. Lihat ticket yang assigned
3. Update status â†’ `in_progress` â†’ `resolved`
4. Input biaya repair & notes

#### **Scenario: Dept Head Monitor**
1. Login as Dept Head
2. Menu **Analytics**
3. Lihat:
   - Total biaya maintenance bulan ini
   - Top 5 AC sering rusak
   - Trend tickets 30 hari terakhir

---

## ğŸ“Š Current Data

### **Assets**
- **Total**: 258 AC units
- **Lokasi**: 
  - Gedung A: Auditorium, Training Room, Meeting Room, Direktur Office
  - Gedung B: SPSI, Klinik, Lobby, Office
  - Gedung C: Chemical, Incoming, Koperasi
  - Gedung D: Engineering Office
- **Brand**: SPLIT, CASSET, Standing (various brands)
- **Status**: Majority "good" (dapat diupdate sesuai kondisi real)

### **Tickets**
- Status distribution akan terlihat di Analytics Dashboard
- Sample categories: panas, bocor, berisik, mati, bau, lainnya

---

## ğŸ” Security

1. **Authentication**: Supabase Auth (email/password dengan magic link support)
2. **Authorization**: Row-Level Security (RLS) di Supabase
3. **API Integration**: Header-based authentication untuk external API
4. **Audit Trail**: Semua aksi penting ter-log (who, what, when)
5. **Route Guards**: Protected routes berdasarkan role

---

## ğŸ¯ Business Impact

### **Sebelum LaporAC**
- âŒ Lapor kerusakan: telpon/chat GA (bisa lupa/tertunda)
- âŒ Jadwal maintenance: Excel manual (sering terlewat)
- âŒ Tracking biaya: Sulit rekap untuk budgeting
- âŒ Data aset: Tersebar di berbagai file

### **Setelah LaporAC**
- âœ… Lapor kerusakan: Scan QR â†’ Langsung masuk sistem (< 1 menit)
- âœ… Validasi GA: Cegah vendor call yang tidak perlu (save cost)
- âœ… Dashboard real-time: KPI, trend, top units bermasalah
- âœ… Audit trail: Transparansi penuh untuk compliance
- âœ… Centralized data: Single source of truth

---

## ğŸ™ Credits & Acknowledgments

**Developed by**: Sulthan Abdi Dzikry  
**For**: Dharma Group (Magang Program)  
**Tech Stack**: Angular + Supabase + Tailwind CSS  
**Timeline**: Januari - Februari 2026  

---

**Last Updated**: 2 Februari 2026, 14:00 WIB  
**Version**: 1.0 (Feature 1 Complete, Feature 2 In Planning)


